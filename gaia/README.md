# Gaiaについて調査したメモ

## 概要

GaiaNetは分散型のコンピューティング基盤であり、誰でも自分のスタイル、価値観、知識、専門性を反映したAIエージェントを作成、デプロイ、スケール、そして収益化することができます。個人や企業がAIエージェントを作成することが可能です。各GaiaNetノードは以下の機能を提供します：

- **ウェブベースのチャットボットUI**  
  GaiaNetノードとチャットできます。このノードはRustプログラミング言語の専門家です。

- **OpenAI互換API**  
  GaiaNetノードをOpenAIの代替として、お気に入りのAIエージェントアプリで使用する方法をご覧ください。

現在のAIエージェントの100%はOpenAIエコシステムのアプリケーションです。

しかし、GaiaNetのAPIアプローチにより、OpenAIの代替として機能します。各GaiaNetノードは、ドメイン知識を補強した微調整モデルを使用してカスタマイズが可能で、従来の一般的な回答を排除します。  

例えば、金融アナリスト用のGaiaNetノードは、SEC 10Kファイリングに対するSQLコードを生成して、ユーザーの質問に答えることができます。

似たようなGaiaNetノードは「GaiaNetドメイン」として整理され、ノード間で負荷分散を行うことで安定したサービスを提供します。GaiaNetドメインは公開URLを持ち、コミュニティにエージェントサービスを宣伝します。ユーザーやエージェントアプリがドメインのAPIエンドポイントURLにリクエストを送信すると、ドメインが準備が整ったノードにリクエストを振り分けます。

## GaiaNet: GenAI エージェントネットワークとは(詳細)

専門化された、ファインチューニング済み、RAG（Retriever-Augmented Generation）対応のオープンソース大規模言語モデル（LLM）は、新しいAIエージェントアプリケーションの中核的要素です。

しかし、これらのエージェントアプリは、従来のクラウドコンピューティングやSaaSインフラに対して、新しい課題をもたらしています。

これには、アプリケーションの移植性、仮想化、セキュリティの分離、コスト、データプライバシー、所有権といった新たな要件が含まれます。

GaiaNetは分散型のコンピューティングインフラで、誰でも自分自身のスタイル、価値観、知識、専門性を反映したAIエージェントを作成、展開、拡張、そして収益化できるようにします。

GaiaNetノードは、以下を含む高性能かつクロスプラットフォームのアプリケーションランタイムで構成されています。

- ファインチューニング済みLLM
- 知識埋め込みモデル
- ベクトルデータベース
- プロンプト管理ツール
- オープンAPIサーバー

### LLM出力を利用した外部ツールや関数を呼び出すためのプラグインシステム

これらは知識労働者によって「デジタルツイン」として展開され、Web APIサービスとして提供されます。また、個別化された知識ベースやコンポーネントを新たな取引可能な資産クラスとして活用するマーケットプレイスが構築される可能性があります。同様のGaiaNetノードは「GaiaNetドメイン」として編成され、信頼性の高いAIエージェントサービスを一般に提供します。GaiaNetノードとドメインは、GaiaNet DAO（分散型自律組織）によって管理されます。さらに、「目的限定型のスマートコントラクト」を活用することで、GaiaNetネットワークはAIエージェントサービスのための分散型マーケットプレイスとなります。

### はじめに
ChatGPTと大規模言語モデル（LLM）の登場は、人々が知識を生成し、消費する方法を根本的に変革しました。わずか1年で、AIネイティブなアプリケーションはチャットボットからコパイロット、さらにエージェントへと進化しました。

「AIエージェントは、コパイロットのような補助的なツールから、独立してタスクを完了する自律的な存在へと進化していくでしょう。」
— Dr. Andrew Ng（セコイアキャピタル AI Ascent 2024 サミット）

エージェントとは、人間のように自律的にタスクを完了できるソフトウェアアプリケーションです。エージェントはタスクを理解し、その手順を計画し、すべてのステップを実行し、エラーや例外を処理し、結果を提供します。強力なLLMがエージェントの「頭脳」として機能する一方で、外部データソース（目や耳）、特定の知識ベースやプロンプト（スキル）、コンテキストストア（記憶）、外部ツール（手）との接続が必要です。

エージェントタスクでは、次の理由でLLMをカスタマイズする必要があります。

- 特定の分野での幻覚（不正確な応答）を減らすため。
- 特定のフォーマット（例：JSONスキーマ）で応答を生成するため。
- 特定のスタイル（例：特定の人物の模倣）で要求に応答するため。
- 特定の分野（例：セキュリティ分野でCVEの脆弱性を分析する）で「政治的に不正確な質問」に答えるため。

### GaiaNet エージェントとは

エージェントは、膨大なエンジニアリングとリソースを必要とする複雑なソフトウェアです。今日、ほとんどのエージェントはクローズドソースで、SaaSベースのLLM上にホストされています。例えば、OpenAI LLMを活用したGPTやMicrosoft/GitHubのコパイロット、Google Gemini LLMを活用したDuetなどが挙げられます。

しかし、エージェントには、基盤となるLLMとソフトウェアスタックを特定のタスクに合わせてカスタマイズし、適応させる必要があります。これは中央集権型SaaSでは非常に困難です。例えば、ChatGPTでは、小さなタスクごとに非常に大きなモデルを利用しなければならず、ファインチューニングやモデルの変更には莫大なコストがかかります。さらに、SaaSホスト型のLLMでは、エージェントのプライベートな知識がどのように使用・共有されるかについてのプライバシー管理が欠如しています。

これらの欠点のため、個人が自分の分野やタスクに合わせたエージェントを作成し、それを収益化することはSaaSプラットフォーム（例：OpenAI、Google、Anthropic、Microsoft、AWS）では困難です。

この論文では、すべての人が利用可能なAIエージェントのための分散型ソフトウェアプラットフォームとプロトコルネットワークを提案します。具体的には、次の2つの目標を掲げています。

- 目標1: 個人のプライベートな知識や専門性を取り入れた個人用LLMエージェントアプリを作成する能力を提供する。これらのアプリは、個人のスタイルや価値観を反映しながら、知識タスクを実行し、ツールを使用します。

- 目標2: 個人がLLMエージェントをサービスとして提供し、それを拡大し、専門性や労力に見合う報酬を得られるようにする。

```txt
GaiaNetは「知識とスキルのためのYouTube」です。
```

### オープンソースと分散化

2024年4月現在、Hugging Faceには6,000以上のオープンソースLLMが公開されています。クローズドソースのLLM（例：GPT-4）と比較して、オープンソースLLMはプライバシー、コスト、体系的なバイアスの点で優れた利点を提供します。また、一般的な質問応答性能においても、オープンソースLLMはクローズドソースのモデルとの差を急速に埋めつつあります。

AIエージェントのユースケースにおいて、小型でタスクに特化したLLMが、大型の汎用モデルを上回る性能を発揮することが示されています。

しかし、個人や企業が独自の異種GPUインフラ上で複数のファインチューニングされたLLMをデプロイし、調整することは困難です。エージェント向けの複雑なソフトウェアスタックや外部ツールとの複雑な相互作用は、脆弱でエラーが発生しやすいです。

さらに、LLMエージェントは、従来のアプリケーションサーバーとは全く異なるスケーリング特性を持っています。LLMは計算負荷が非常に高く、通常、1回に1ユーザーしか対応できず、数秒間ブロックすることもあります。そのため、スケーリングの必要性は、単一サーバーで非同期リクエストを処理することから、多くの離散サーバー間でインターネット規模で負荷を分散することに変わっています。

## GaiaNetプロジェクト

GaiaNetプロジェクトは、以下の機能を備えたオープンソースのLLMをファインチューニングするためのクロスプラットフォームかつ高効率なSDKとランタイムを提供します。

- 独自のナレッジベース
- カスタマイズされたプロンプト
- 構造化された応答
- 関数呼び出し用の外部ツール

GaiaNetノードは、個人用、クラウド、エッジデバイス上で数分で起動可能です。その後、インセンティブ付きのWeb3ネットワークを介してサービスを提供できます。

# GaiaNetノードの構成要素

GaiaNetネットワークの基本運用単位はノードです。GaiaNetノードは、自身のAIエージェントを運用するための簡素化されたソフトウェアスタックです。ノードは以下の7つの主要コンポーネントで構成されています。

## 1. アプリケーションランタイム

GaiaNetアプリケーションは、WasmEdgeと呼ばれる軽量で安全かつ高性能なサンドボックス内で実行されます。WasmEdgeは、Linux FoundationとCNCFが管理するオープンソースプロジェクトであり、DockerやKubernetesなどのクラウドネイティブツールとシームレスに連携します。また、ブロックチェーン上でスマートコントラクトを安全かつ効率的に実行するための仮想マシンとしても利用されています。

WasmEdgeは高性能でクロスプラットフォームのランタイムであり、ほぼすべてのCPU、GPU、AIアクセラレーター上でAIモデルをネイティブスピードで実行できるため、分散型AIエージェントに最適です。

## 2. ファインチューニングされたLLM

GaiaNetノードは、ほぼすべてのオープンソースLLM、マルチモーダルモデル（例：Large Vision Models）、およびStable Diffusionやテキストからビデオを生成するモデルをサポートします。

ノード所有者は、多様なツールを使用してオープンソースモデルをファインチューニングできます。たとえば、個人のチャット履歴を使ってLLMをファインチューニングし、独自の話し方を模倣させることが可能です。また、特定の知識分野に焦点を当てることで、幻覚（誤情報）の削減や回答品質の向上が図れます。さらに、出力形式を事前定義されたJSONスキーマに一致させることが保証されます。

## 3. 埋め込みモデル

GaiaNetノードは、AIエージェントが使用する公開または独自の知識ベースを管理するために埋め込みモデルを使用します。このモデルは入力文章をベクトル表現に変換し、意味的に類似する文章を高次元空間で近くに配置します。これにより、ユーザー質問や会話を迅速に処理し、知識ベース内の関連する内容を特定できます。

## 4. ベクトルデータベース

生成された埋め込みベクトルは、最適なパフォーマンスと最大のプライバシーを確保するため、ノード自体に保存されます。GaiaNetノードにはQdrantベクトルデータベースが含まれています。

## 5. カスタムプロンプト

新しいアプリケーションにLLMを簡単にカスタマイズする最も簡単な方法は、プロンプトを提供することです。プロンプトエンジニアリングは、この分野の実用的な研究と開発の対象となっています。GaiaNetノードは、システムプロンプトやRAGプロンプトなど、さまざまなプロンプトをサポートしています。

## 6. 関数呼び出しとツール利用

LLMは、自然言語生成だけでなく、機械命令の生成にも優れています。GaiaNetノードは、生成される出力形式を事前定義されたJSONスキーマに準拠させることが可能で、外部ツールと連携してタスクを実行できます。

## 7. APIサーバー

すべてのGaiaNetノードは同じ質問応答APIを備えています。これにより、フロントエンドアプリケーションが任意のGaiaNetノードと連携可能です。APIサーバーはWasmEdge上で安全に動作し、ノード内のすべてのコンポーネントを統合します。また、RAGを強化したファインチューニング済みLLMとのチャットを可能にするWebベースのチャットボットUIも提供します。

# GaiaNetネットワーク

個々のGaiaNetノードは強力なAIエージェントですが、単独で公共サービスを提供するには適していません。これには以下の理由があります。

- 公共利用者にとって、個々のノードの信頼性を判断することは困難です。
- ノード所有者にとって、コストが高いため公共サービスを提供する経済的インセンティブがありません。
- エージェントサーバーは従来のアプリケーションサーバーと異なるスケーリング特性を持っています。

## GaiaNetドメイン

これらの課題を解決するため、GaiaNetネットワークでは「ドメイン」という概念が導入されました。GaiaNetドメインは単一のインターネットドメイン名の下で利用可能なノードの集合体です。ドメイン運営者は、ノードを登録し、APIサービスを提供し、収益を分配する責任を持ちます。

## GaiaNetトークン

GaiaNetトークンは、トランザクションを促進し、ガバナンスを支え、ネットワーク内での信頼を促進するために設計されたユーティリティトークンです。

### 主な役割

1. **DAOガバナンストークン**として、ネットワークのルール設定に参加可能です。
2. **ステーキングトークン**として、ドメイン運営者の信頼性を担保します。
3. **支払いトークン**として、サービス料金の支払いに使用されます。


## 公開GaiaNetノード

各GaiaNetノードは、ウェブベースのチャットボットUIとOpenAI互換のウェブサービスを提供します。以下に人気のあるノードを紹介します。お気に入りのエージェントフレームワークやアプリでGaiaNet APIを利用する方法は、エージェントアプリのセクションをご参照ください。

Gaiaノードは「Gaiaドメイン」として整理され、公開サービスを提供します。各ドメインには単一のAPIエンドポイントがあり、複数のノード間で負荷分散を行うことでサービスの可用性を確保します。以下に、一般公開されている無料のGaiaドメインをいくつか紹介します。

---

## 公開Gaiaドメイン

### **LLM: Llama 8b**
このドメインは、追加知識なしのLlama 3.1 8bエージェントノードを実行します。ツールや関数呼び出しが可能です。ツール呼び出しモデルの使用方法については、エージェントアプリの利用方法をご覧ください。チャットしたり、他のアプリで利用することができます。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://llama8b.gaia.domains/v1`  |
| モデル名 (LLM用)      | `llama`                            |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

### **音声からテキスト: Whisper v2 Large**
このドメインは、音声からテキストへの転写と翻訳を行うWhisper v2 Largeエージェントノードを実行します。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://whisper.gaia.domains/v1`  |
| モデル名             | `whisper`                          |
| APIキー              | 空欄または任意の値                  |

---

### **テキストから画像: Realistic Vision**
このドメインは、リアルなポートレートを生成するように微調整された安定拡散エージェントノードを実行します。モデルはRealistic Vision V6.0 B1です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://portrait.gaia.domains/v1` |
| モデル名             | `portrait`                         |
| APIキー              | 空欄または任意の値                  |

---

### **テキストから音声: GPT-SoVITS**
**近日公開！**

---

## コーディングアシスタントエージェント

### **Coder**
汎用コーディングエージェントで、STOA Coder LLMを実行します。非常に高性能ですが、動作が遅い場合があります。チャットしたり、Cursor AIやZedなどのIDEツールから利用可能です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://coder.gaia.domains/v1`    |
| モデル名 (LLM用)      | `coder`                            |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

### **Rust Coder**
Rust Foundationのオープンソースコンテンツや書籍の知識で補強されたコーディングエージェントです。チャットしたり、Cursor AIやZedなどのIDEツールから利用可能です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://rustcoder.gaia.domains/v1`|
| モデル名 (LLM用)      | `rustcoder`                        |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

## 代替LLMドメイン

### **Llama 3b**
追加知識なしのLlama 3.2 3bエージェントノードを実行します。チャットしたり、他のアプリで利用可能です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://llama3b.gaia.domains/v1`  |
| モデル名 (LLM用)      | `llama3b`                          |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

### **Qwen 7b**
非英語タスク（例: 翻訳）に優れたQwen 7b LLMです。チャットしたり、他のアプリで利用可能です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://qwen7b.gaia.domains/v1`   |
| モデル名 (LLM用)      | `qwen7b`                           |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

### **Qwen 72b**
最高性能のオープンソースLLMであるQwen 72bです。非常に高性能ですが、動作が遅い場合があります。ツールや関数呼び出しが可能です。以下の設定を使ってOpenAIの設定を置き換えてください。

| 設定項目             | 値                                  |
|----------------------|-------------------------------------|
| APIエンドポイントURL | `https://qwen72b.gaia.domains/v1`  |
| モデル名 (LLM用)      | `qwen72b`                          |
| モデル名 (テキスト埋め込み用) | `nomic-embed`                  |
| APIキー              | 空欄または任意の値                  |

---

## GaiaNetノードの利用方法

GaiaNetノードを起動するか、ウェブ上でノードを見つけた場合、それをウェブベースのチャットボットUIやOpenAI互換のウェブサービスとして使用できます。ノードの公開URLをブラウザで開くと、ダッシュボードにアクセスできます。  
例えば、以下のようなURLです：  
`https://0x1234...xyz.gaianet.network/`

### **ウェブベースのチャットボット**
GaiaNetノードのダッシュボードでは、「このノードとチャットする」ボタンが表示されます。

### **OpenAI APIの代替**
GaiaNetノードは、エージェントやLLMアプリでOpenAI APIをそのまま置き換えられます。ダッシュボードには、これらのアプリでOpenAIのパラメータを置き換える方法を示す表が表示されます。

## チュートリアル

## 外部ツールの呼び出し

ツール呼び出しは、これまで存在しなかった真の「LLMネイティブ」なインタラクションモードの1つです。これにより、「思考する」LLMが「行動する」能力を得ることができ、新しい知識を獲得したり現実世界での行動を実行したりできるようになります。これは、エージェント型アプリケーションにおいて重要な要素です。

オープンソースのLLMはツールを使用する能力がますます向上しています。Llama 3モデルにより、個人のラップトップ上で稼働する8bクラスのLLMで信頼性の高いツール呼び出しを実現することが可能になりました！

このチュートリアルでは、ローカルLLMがローカルコンピューター上でコードを実行しデータを操作できるシンプルなPythonプログラムを紹介します。

---

## 必要条件

Gaiaノードを準備して、公開URLを通じてLLMサービスを提供する必要があります。次の方法で実行できます：

- **自身でノードを運用する場合**  
  Gaiaノードを起動し、Llama-3-GroqモデルまたはMistral-7B-v0.3 Instructモデルを使用してください。その後、ノードのAPI URLエンドポイントとモデル名をツール呼び出しアプリで使用できます。
- **パブリックノードを使用する場合**  
  このチュートリアルでは、関数呼び出し対応のパブリックLlama3ノードを使用します。

| 属性             | 値                                             |
|------------------|-----------------------------------------------|
| APIエンドポイントURL | `https://llamatool.us.gaianet.network/v1`      |
| モデル名         | llama                                         |
| APIキー          | gaia                                          |

---

## デモエージェントの実行

エージェントアプリはPythonで記述されています。このアプリは、LLMがツールを使用してSQLデータベースを操作する方法を示します。この場合、インメモリSQLiteデータベースを起動し、操作します。このデータベースにはToDoリストが保存されます。

### コードのダウンロードと依存関係のインストール

以下のコマンドを使用して、コードをダウンロードしPython依存関係をインストールしてください：

```bash
git clone https://github.com/second-state/llm_todo
cd llm_todo
pip install -r requirements.txt
```

### 環境変数の設定
APIサーバーとモデル名の環境変数を設定します：

```bash
export OPENAI_MODEL_NAME="llama"
export OPENAI_BASE_URL="https://llamatool.us.gaianet.network/v1"
```

### アプリケーションの起動
以下のコマンドでmain.pyアプリケーションを実行し、コマンドラインチャットインターフェースを起動します：

```bash
python main.py
```

### エージェントの使用
LLMにタスクを依頼できます。例えば、次のように指示します：

ユーザー：   
マーケティングチームとの会議を予定に追加してください。

LLMは、データベースにレコードを挿入する必要があることを理解し、ツール呼び出しレスポンスをJSON形式で返します：

アシスタント：   

```json
<tool_call>
{"id": 0, "name": "create_task", "arguments": {"task": "have a meeting with the marketing team"}}
</tool_call>
```

エージェントアプリ（main.py）は、このJSONレスポンス内のcreate_taskツール呼び出しを実行し、結果を「Tool」ロールとして返します。

このプロセスはmain.py内で自動的に実行されるため、ユーザーが手動で操作する必要はありません。エージェントアプリがツール呼び出しを実行すると、SQLiteデータベースが更新されます。

ツール：

```json
[{'result': 'ok'}]
```

LLMは実行結果を受け取り、以下のように応答します：

アシスタント：
マーケティングチームとの会議をタスクリストに追加しました。他に何か追加しますか？

その後も会話を続けることが可能です。

ツール呼び出しの詳細な仕組みについては、この記事をご覧ください。

### 信頼性を向上させる
LLMアプリケーションにおける主な課題の1つは、応答の信頼性が低いことです。例えば：

- 不正確なツール呼び出し   
  ユーザーのクエリに対応しないツール呼び出しが生成される場合、各ツール呼び出し関数の説明を精査して最適化することで対応できます。LLMはこれらの説明に基づいてツールを選択するため、説明をユーザーの典型的なクエリに合致する形で設計することが重要です。

- 幻覚（ハルシネーション)   
  存在しない関数名や不正確なパラメータを伴うツール呼び出しが生成される場合、エージェントアプリは問題を検出し、LLMに新たな応答を生成するよう促すべきです。

ツール呼び出しは、進化するエージェント型LLMアプリケーションの基本的な機能です。皆さんの革新的なアイデアを楽しみにしています！

## GaiaNetでのエージェンティック翻訳

アンドリュー・ン教授のエージェンティック翻訳は、複数のLLM（大規模言語モデル）「エージェント」を協調させ、1つのタスクに取り組む方法を示す優れたデモです。これにより、Llama-3やGemma-2のような小規模なLLMを組み合わせて使用することで、ChatGPTのような1つの大規模LLMよりも優れた結果を得ることができます。

GaiaNetは、2000以上のノードが様々なファインチューニング済みLLMや知識ベースを稼働させており、エージェンティックアプリが自分のLLMバックエンドを選択・利用する大きな可能性を提供します。

### LLM翻訳エージェントの概要

このLLM翻訳エージェントは、複数の言語間で正確かつ効率的な翻訳を実現するよう設計されています。オープンソースのLLMを使用し、高品質な翻訳を提供します。ユーザーは独自のファインチューニングモデルやHugging FaceにあるMetaのLlama-3のようなモデルを利用することが可能です。

このエージェントを開始して実行するための詳細なコマンドについては、GitHub - Second State/translation-agentをご覧ください。

以下のコマンドで翻訳エージェントをクローンします。

```bash
git clone https://github.com/second-state/translation-agent.git

cd translation-agent
git checkout use_llamaedge
```


以下は、依頼された英語の内容を日本語に翻訳し、マークダウン形式でまとめたものです。

GaiaNetでのエージェンティック翻訳
アンドリュー・ン教授のエージェンティック翻訳は、複数のLLM（大規模言語モデル）「エージェント」を協調させ、1つのタスクに取り組む方法を示す優れたデモです。これにより、Llama-3やGemma-2のような小規模なLLMを組み合わせて使用することで、ChatGPTのような1つの大規模LLMよりも優れた結果を得ることができます。

GaiaNetは、2000以上のノードが様々なファインチューニング済みLLMや知識ベースを稼働させており、エージェンティックアプリが自分のLLMバックエンドを選択・利用する大きな可能性を提供します。

LLM翻訳エージェントの概要
このLLM翻訳エージェントは、複数の言語間で正確かつ効率的な翻訳を実現するよう設計されています。オープンソースのLLMを使用し、高品質な翻訳を提供します。ユーザーは独自のファインチューニングモデルやHugging FaceにあるMetaのLlama-3のようなモデルを利用することが可能です。

このエージェントを開始して実行するための詳細なコマンドについては、GitHub - Second State/translation-agentをご覧ください。

以下のコマンドで翻訳エージェントをクローンします。

bash
コードをコピーする
git clone https://github.com/second-state/translation-agent.git

cd translation-agent
git checkout use_llamaedge
次に、エージェントに必要なバックエンドAPIサービスを提供するローカルGaiaNetノードをインストールします。自身でノードを起動したくない場合は、GaiaNetのコミュニティノードを利用することもできます。

```bash
curl -sSfL 'https://github.com/GaiaNet-AI/gaianet-node/releases/latest/download/install.sh' | bash
```

以下の設定と前提条件も必要です。公開されたGaiaNetノードを使用する場合は、http://localhost:8080をhttps://node_id.us.gaianet.networkに置き換えてください。
```

```bash
export OPENAI_BASE_URL="http://localhost:8080/v1"
export PYTHONPATH=${PWD}/src
export OPENAI_API_KEY="GAIANET"

pip install python-dotenv
pip install openai tiktoken icecream langchain_text_splitters
```

## デモ1: Llama-3-8Bを使用した翻訳エージェントの実行

Meta AIの人気モデルLlama-3を使用して翻訳エージェントを実行します。このデモでは、最小サイズのLlama-3モデル（8Bモデル）を選択します。翻訳タスクは中国語から英語への翻訳です。ソーステキストは中国語で書かれた故宮に関する簡単な紹介文です。

ステップ1.1: Llama-3-8B GaiaNetノードの起動
モデルを設定してダウンロードします。モデルサイズは5.73GBで、ダウンロードには時間がかかる場合があります。

```bash
gaianet init --config https://raw.githubusercontent.com/GaiaNet-AI/node-configs/main/llama-3-8b-instruct/config.json
```

以下のコマンドでgaianetを起動

```bash
gaianet start
```

ステップ1.2: Llama-3-8B上で翻訳エージェントを実行
クローンしたエージェントリポジトリのexamples/example_script.pyファイルを確認します。このスクリプトは、ドキュメントの場所と翻訳方法をエージェントに指示します。使用するモデル名（例: Meta-Llama-3-8B-Instruct-Q5_K_M）および翻訳する言語（例: 中国語から英語）を変更します。

以下にサンプルコードを示します。

```python
import os
import translation_agent as ta

if __name__ == "__main__":
    source_lang, target_lang, country = "Chinese", "English", "Britain"

    relative_path = "sample-texts/forbiddencity.txt"
    script_dir = os.path.dirname(os.path.abspath(__file__))

    full_path = os.path.join(script_dir, relative_path)

    with open(full_path, encoding="utf-8") as file:
        source_text = file.read()

    print(f"Source text:\n\n{source_text}\n------------\n")

    translation = ta.translate(
            source_lang=source_lang,
            target_lang=target_lang,
            source_text=source_text,
            country=country,
            model="Meta-Llama-3-8B-Instruct-Q5_K_M",
    )

    print(f"Translation:\n\n{translation}")

```

examples/sample-textsフォルダに翻訳するファイルを配置し、そのパスを指定します。この例では、forbiddencity.txtという名前のソーステキストを使用しています。

以下のコマンドを実行して、テキストファイルを翻訳します。

```bash
cd examples
python example_script.py
```

数分後、ターミナル画面に完全に翻訳されたバージョンが表示されます。

以下の手順は「デモ2: Gemma-2-27bを使用した翻訳エージェントの実行」「デモ3: Phi-3-Medium長文モデルの利用」にも適用可能です。それぞれのモデルに対応する設定とコマンドを使用してください。

## Coinbase AgentKitの使用方法

## Coinbase AgentKitとGaiaノードの連携

Coinbase AgentKitを利用するには、Gaiaノードを使用することができます。このGaiaノードには、ツール呼び出しに最適化されたLLM（大規模言語モデル）が必要です。または、単純に弊社のパブリックノードを利用することも可能です。

| 属性               | 値                                   |
|--------------------|--------------------------------------|
| APIエンドポイントURL | https://llamatool.us.gaianet.network/v1 |
| モデル名            | llama                               |
| APIキー            | gaia                                |

## クイックスタート
1. まず、Coinbase Developer Platformのアカウントを作成し、APIキーを取得してください。

2. 次に、AgentKitのサンプルコードを確認します。

```bash
git clone https://github.com/coinbase/cdp-agentkit
cd cdp-agentkit/cdp-langchain/examples/chatbot
```

3. 環境変数をセットアップする。

```bash
export CDP_API_KEY_NAME='organizations/.../apiKeys/...'
export CDP_API_KEY_PRIVATE_KEY='-----BEGIN EC...END EC PRIVATE KEY-----\n'
```

4. chatbot.pyファイルを編集して、上記のGaiaノードを使用するようエージェントを設定します。

```python
llm = ChatOpenAI(model="llama", api_key="GAIA", base_url="https://llamatool.us.gaianet.network/v1")
```

5. 最後に、Pythonでエージェントを実行します。

```bash
python chatbot.py
```

## AgentKit用Telegramボット
Telegramボットも用意しており、テキストや音声メッセージを介して、自身のウォレットと対話できます。このボットを操作するには、自身のCoinbase認証情報とウォレットが必要です。

### Telegramボットにアクセス

Telegramで以下のリンクからボットにアクセスしてください。
https://t.me/agentkit_bot

ボットはウォレット認証情報を設定するためのスラッシュコマンドを要求します。以下の形式で入力します。

```plaintext
/name organizations/.../apiKeys/...

/pk -----BEGIN EC...END EC PRIVATE KEY-----\n

/wallet {"wallet_id": "...
```

その後、Telegramボットに対してオンチェーンで実行したい内容を伝えるだけで、エージェントが自動的に処理します。





### 参考文献
1. [Gaia 公式サイト](https://www.gaianet.ai/)
2. [Gaia 公式ドキュメント](https://www.gaianet.ai/docs)
3. [Gaia 開発者ドキュメント](https://docs.gaianet.ai/category/user-guide/?_gl=1*kpfgwo*_ga*MTg3MzYzOTg4MC4xNzM1MDQxOTU5*_ga_V3W2HJ72V0*MTczNTA0MTk1OC4xLjEuMTczNTA0MjAyNC4wLjAuMA..)
4. [GitHub - ワークショップ用のリポジトリ](https://github.com/GaiaNet-AI/workshops)
5. [GitHub - GaiaNet](https://github.com/GaiaNet-AI)